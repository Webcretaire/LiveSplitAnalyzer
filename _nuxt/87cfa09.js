(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{278:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=new(n(9).default)},279:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"a",(function(){return m}));var r=n(23),o=n(22),c=(n(1),function(input){return null==input?[]:Array.isArray(input)?input:[input]}),l=function(t){t.preventDefault(),t.returnValue=""},d=function(){window.addEventListener("beforeunload",l)},f=function(){window.removeEventListener("beforeunload",l)},m=Object(r.a)((function t(){var e=this;Object(o.a)(this,t),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.reject=n,e.resolve=t}))}))},280:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return l}));n(11),n(162),n(15),n(127);var r=function(time){var t=time.match(/([0-9]+):([0-9]+):([0-9.]+)/);if(!t)return 0;var e=+t[1],n=+t[2];return+t[3]+60*n+3600*e},o=function(time){var t=time.match(/([0-9]+):([0-9]+):([0-9.]+)/);if(!t)return"";var e=+t[1],n=+t[2],r=+t[3],o="";return e&&(o+="".concat(e,"h")),n&&(o+="".concat(n,"m")),o+="".concat(r<10?"0":"").concat(r.toFixed(2),"s")},c=function(time){var t="",e=!0;return time>=3600&&(e=!1,t+="".concat(Math.floor(time/3600),"h"),time%=3600),time>=60&&(e=!1,t+="".concat(Math.floor(time/60),"m"),time%=60),t+="".concat(!e&&time<10?"0":"").concat(Math.abs(+time.toFixed(2)),"s")},l=function(time){var t="";t+="".concat(Math.floor(time/3600),":"),time%=3600;var e=Math.floor(time/60);return t+="".concat(e<10?"0":"").concat(e,":"),t+="".concat((time%=60)<10?"0":"").concat(Math.abs(+time.toFixed(6)))}},281:function(t,e,n){"use strict";var r=n(9).default.observable({hasGameTime:!1,useRealTime:!1,splitFile:{},splitFileIsModified:!1});e.a={get state(){return r}}},282:function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"d",(function(){return m}));n(16),n(1),n(3),n(101),n(102);var r=n(281),o=n(280),c=n(279),l=function(t){return(null==t?void 0:t.GameTime)||(null==t?void 0:t.RealTime)||null},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0;return t.Segment.map((function(t){var r;return(r=!0===e?t.BestSegmentTime.GameTime:!1===e?t.BestSegmentTime.RealTime:l(t.BestSegmentTime))&&(n+=Object(o.d)(r)),n}))},f=function(t){return t.Segment.reduce((function(t,e){return Object(c.b)(e.SplitTimes.SplitTime).forEach((function(s){t.includes(s["@_name"])||t.push(s["@_name"])})),t}),[])},m=function(t){r.a.state.splitFileIsModified=t,t?Object(c.c)():Object(c.d)()}},283:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c}));var r=n(278),o=function(t){r.a.$emit("startLoading",(function(){t(),r.a.$emit("stopLoading")}))},c=function(t){r.a.$emit("startLoading",(function(){t((function(){return r.a.$emit("stopLoading")}))}))}},294:function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t[t.PING=0]="PING",t[t.DELETE_ATTEMPT_BEFORE_NUMBER=1]="DELETE_ATTEMPT_BEFORE_NUMBER",t[t.SEG_TIME_ARRAY_TO_SECONDS=2]="SEG_TIME_ARRAY_TO_SECONDS",t[t.GOLD_COORDINATES_FROM_SECONDS_ARRAY=3]="GOLD_COORDINATES_FROM_SECONDS_ARRAY",t[t.XML_PARSE_TEXT=4]="XML_PARSE_TEXT",t[t.MERGE_SPLIT_INTO_NEXT_ONE=5]="MERGE_SPLIT_INTO_NEXT_ONE"}(r||(r={}))},298:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n(1),n(38);var r=n(279),o=new function(){return new Worker(n.p+"344cfa3.worker.js")},c={};o.addEventListener("message",(function(t){var e=c[t.data.magic];e?(delete c[t.data.magic],e.resolve(t.data.message)):console.error("Got message from worker with no matching operation: ".concat(t.data.magic))}));var l=function(t){var e;do{e=btoa((1e10*Math.random()).toString())}while(c[e]);c[e]=new r.a;for(var n=arguments.length,l=new Array(n>1?n-1:0),d=1;d<n;d++)l[d-1]=arguments[d];return o.postMessage({message:{instruction:t,args:l},magic:e}),c[e].promise}},299:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c}));var r="#1f77b4",o="#ffc400",c="#2db41e"},302:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={currentSplit:null}},303:function(t,e,n){var content=n(343);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(80).default)("7be6f06b",content,!0,{sourceMap:!1})},333:function(t,e,n){"use strict";n.r(e);n(161);var r=n(22),o=n(23),c=n(60),l=n(100),d=n(44),f=n(40),m=(n(6),n(1),n(163),n(11),n(26),n(128),n(16),n(2),n(15),n(66),n(49),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(164),n(282)),h=n(277),v=n(280),S=(n(360),n(18),n(299)),_=n(278),y=n(302),O=n(279),T=n(283),x=n(281),E=n(298),N=n(294),j=n(300);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var R=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},A=function(t){Object(c.a)(n,t);var e=w(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).segments=x.a.state.splitFile.Run.Segments.Segment,t.collapseVisible=!1,t.timesSeconds=[],t.layout={},t.gold={x:0,y:0},t.formatTime=v.a,t}return Object(o.a)(n,[{key:"updateLayout",value:function(){var t={title:"Time history",xaxis:{title:"Finished number (".concat(this.timesWithPositiveIds.length," total)")},yaxis:{title:"Time (seconds)",rangemode:this.graphYAxisToZero?"tozero":"nonnegative"},annotations:[{x:this.gold.x,y:this.gold.y,text:"Gold",font:{color:S.b},arrowhead:2,arrowsize:1,arrowwidth:2,arrowcolor:S.b,ax:0,ay:30}]},e=Object(m.c)(this.currentAttempt);this.graphCurrentAttemptHline&&this.currentAttemptNumber&&e&&(t.shapes=[{type:"line",x0:0,y0:Object(v.d)(e),x1:this.timesSeconds.length-1,y1:Object(v.d)(e),line:{color:S.a,width:1,dash:"dot"}}]),this.layout=t}},{key:"isSubsplit",get:function(){return this.split.Name.startsWith("-")}},{key:"bestTimeDisplay",get:function(){return this.formatTime(Object(m.c)(this.split.BestSegmentTime)||"")}},{key:"updateGold",value:function(t){var e=this;Object(E.a)(N.a.GOLD_COORDINATES_FROM_SECONDS_ARRAY,t).then((function(t){return e.gold=t}))}},{key:"currentAttempt",get:function(){var t=this;return this.timesWithPositiveIds.find((function(e){return e["@_id"]===t.currentAttemptNumber}))}},{key:"goldsMap",get:function(){var t=999999;return this.timesSeconds.map((function(e){return!!(e&&e<t)&&(t=e,!0)}))}},{key:"updateTimesSeconds",value:function(t){var e=this;Object(E.a)(N.a.SEG_TIME_ARRAY_TO_SECONDS,t).then((function(t){return e.timesSeconds=t}))}},{key:"collapseName",get:function(){return"collapse-split-"+this.splitIndex}},{key:"markerColors",get:function(){for(var t,e=[],i=0;i<this.timesWithPositiveIds.length;++i)this.timesWithPositiveIds[i]["@_id"]==(null===(t=this.currentAttempt)||void 0===t?void 0:t["@_id"])?e.push(S.a):e.push(this.goldsMap[i]?S.b:S.c);return e}},{key:"markerSizes",get:function(){for(var t,e=[],i=0;i<this.timesWithPositiveIds.length;++i)this.timesWithPositiveIds[i]["@_id"]==(null===(t=this.currentAttempt)||void 0===t?void 0:t["@_id"])?e.push(6):e.push(this.goldsMap[i]?5:3);return e}},{key:"timesWithPositiveIds",get:function(){return Object(O.b)(this.split.SegmentHistory.Time).filter((function(t){return t["@_id"]>0}))}},{key:"isNotLastSplit",get:function(){return this.splitIndex!=this.segments.length-1}},{key:"plot_data",get:function(){var t=this.timesWithPositiveIds.map((function(t){var time=Object(m.c)(t);return time?"".concat(Object(v.a)(time)," (attempt ").concat(t["@_id"],")"):""}));return[{x:Array.from({length:this.timesWithPositiveIds.length},(function(t,e){return e})),y:this.timesSeconds,text:t,type:"scatter",hoverinfo:"text",mode:"lines+markers",marker:{color:this.markerColors,size:this.markerSizes},line:{color:S.c,width:1}}]}},{key:"mergeSplitTooltip",get:function(){return'"'.concat(this.split.Name,'" will be deleted, and its times merged with "').concat(this.nextSplit.Name,'"')}},{key:"srcFormattedIcon",get:function(){var t=function(t){for(var e=atob(t),n=e.length,data=new Uint8Array(n),r=0;r<n;r++)data[r]=e.charCodeAt(r);var i,o=new Uint8Array([137,80,78,71,13,10,26,10]),c=0,l=0,d=!1;for(i=0;i<data.length&&(data[i]==o[c]?(0==c&&(l=i),c==o.length-1?d=!0:c++):c=0,!d);++i);if(!d)return console.error("No PNG file in input data"),null;for(;;){i+=4;var f=new Uint8Array([data[i],data[i-1],data[i-2],data[i-3]]),m=new Uint32Array(f.buffer,0,1)[0];i+=4,f=new Uint8Array([data[i-3],data[i-2],data[i-1],data[i]]);var h=(new TextDecoder).decode(f);if(i+=m,(i+=4)>data.length)return console.error("OOB"),null;if("IEND"==h)break}return data.slice(l,i)}(this.split.Icon);return t?"data:image/jpeg;base64,".concat(btoa(new Uint8Array(t).reduce((function(data,t){return data+String.fromCharCode(t)}),""))):null}},{key:"fixGoldsModal",value:function(){_.a.$emit("openModal","ManualGoldUpdateModal"),y.a.currentSplit=this.split,_.a.$emit("setCurrentSplit",this.split)}},{key:"nextSplit",get:function(){return x.a.state.splitFile.Run.Segments.Segment[this.splitIndex+1]}},{key:"doMergeNextSplit",value:function(t){var e=this,n=this.split.Name,r=this.nextSplit.Name;Object(E.a)(N.a.MERGE_SPLIT_INTO_NEXT_ONE,x.a.state.splitFile.Run.Segments.Segment,this.splitIndex).then((function(o){var c;Object(m.d)(!0);var l=x.a.state.splitFile.Run.AutoSplitterSettings;(null===(c=null==l?void 0:l.Splits)||void 0===c?void 0:c.Split)&&l.Splits.Split.splice(e.splitIndex,1),x.a.state.splitFile.Run.Segments.Segment=o,e.$bvToast.toast("Merged ".concat(n," with ").concat(r),{title:"Splits merged",autoHideDelay:5e3,appendToast:!1,variant:"success"}),t()}))}},{key:"mergeNextSplit",value:function(){var t=this;_.a.$emit("openConfirm",'Merge "'.concat(this.split.Name,'" into "').concat(this.nextSplit.Name,'"?'),(function(){Object(T.b)((function(e){return t.doMergeNextSplit(e)}))}))}}]),n}(h.Vue);R([Object(h.Prop)()],A.prototype,"split",void 0),R([Object(h.Prop)({default:!1})],A.prototype,"graphYAxisToZero",void 0),R([Object(h.Prop)({default:!1})],A.prototype,"graphCurrentAttemptHline",void 0),R([Object(h.Prop)()],A.prototype,"currentAttemptNumber",void 0),R([Object(h.Prop)()],A.prototype,"splitIndex",void 0),R([Object(h.Watch)("gold"),Object(h.Watch)("timesWithPositiveIds")],A.prototype,"updateLayout",null),R([Object(h.Watch)("timesSeconds",{immediate:!0})],A.prototype,"updateGold",null),R([Object(h.Watch)("timesWithPositiveIds",{immediate:!0})],A.prototype,"updateTimesSeconds",null);var M=A=R([Object(h.Component)({components:{Plotly:j.Plotly}})],A),I=(n(342),n(65)),component=Object(I.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticClass:"SingleSplitCard text-left",attrs:{id:"SingleSplitCard_"+t.splitIndex}},[n("div",{staticClass:"limit-height"},[t.srcFormattedIcon?n("div",{staticClass:"split-icon-container mr-4 ml-2"},[n("b-card-img",{staticClass:"split-icon",attrs:{src:t.srcFormattedIcon,block:""}})],1):t._e(),t._v(" "),n("div",{staticClass:"mt-auto mb-auto"},[n("h3",[t._v("\n          "+t._s(t.isSubsplit?t.split.Name.substring(1):t.split.Name)+" "),t.isSubsplit?n("small",[t._v("(subsplit)")]):t._e()]),t._v(" "),t.split.BestSegmentTime?n("p",{staticClass:"m-0"},[n("span",{staticClass:"mr-2"},[n("strong",[t._v("Best time:")]),t._v(" "+t._s(t.bestTimeDisplay))]),t._v(" "),n("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"warning"},on:{click:t.fixGoldsModal}},[t._v("Fix fake golds")]),t._v(" "),t.isNotLastSplit?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{size:"sm",variant:"info",title:t.mergeSplitTooltip},on:{click:t.mergeNextSplit}},[t._v("\n            Merge into next split\n          ")]):t._e()],1):t._e(),t._v(" "),n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.collapseName,expression:"collapseName"}],staticClass:"toggle-collapse",attrs:{variant:"outline-dark",pill:""}},[n("font-awesome-icon",{attrs:{icon:"chevron-left",rotation:t.collapseVisible?270:null}})],1)],1)])]),t._v(" "),n("b-collapse",{staticClass:"mt-1",attrs:{id:t.collapseName},model:{value:t.collapseVisible,callback:function(e){t.collapseVisible=e},expression:"collapseVisible"}},[n("b-card",{staticClass:"text-left"},[n("Plotly",{attrs:{data:t.plot_data,layout:t.layout,"display-mode-bar":!0}})],1)],1)],1)}),[],!1,null,"fe261cf6",null);e.default=component.exports},342:function(t,e,n){"use strict";n(303)},343:function(t,e,n){var r=n(79)(!1);r.push([t.i,"*[data-v-fe261cf6]{color:#000}img[data-v-fe261cf6]{filter:drop-shadow(0 0 .5rem rgb(0,0,0))}.limit-height[data-v-fe261cf6]{display:flex}.split-icon-container[data-v-fe261cf6]{min-width:6.5rem;text-align:center;display:flex;justify-content:center;align-items:center}.split-icon-container .split-icon[data-v-fe261cf6]{-o-object-fit:contain;object-fit:contain;max-width:100%;max-height:5rem;width:auto;height:auto}.toggle-collapse[data-v-fe261cf6]{position:absolute;top:1rem;right:1rem}small[data-v-fe261cf6]{color:#6b6b6b;font-size:1rem}",""]),t.exports=r}}]);